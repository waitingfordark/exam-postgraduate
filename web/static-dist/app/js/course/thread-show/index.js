webpackJsonp(["app/js/course/thread-show/index"],{0:function(t,e){t.exports=jQuery},eb8f89cfd4f6572009d6:function(t,e,a){"use strict";var o=a("b334fd7e4c5a19234db2"),n=(function(t){t&&t.__esModule}(o),CKEDITOR.replace("post_content",{toolbar:"Thread",fileSingleSizeLimit:app.fileSingleSizeLimit,filebrowserImageUploadUrl:$("#post_content").data("imageUploadUrl")}));n.on("change",function(){$("#post_content").val(n.getData())}),n.on("blur",function(){$("#post_content").val(n.getData())});var r=$("#thread-post-form"),s=r.validate({rules:{"post[content]":{required:!0}}});$(".js-btn-thread-post-form-save").click(function(){if(s.form()){$(".js-btn-thread-post-form-save").button("loading"),$(".thread-post-list").find("li.empty").remove();var t=$("#thread-post-form");$.ajax({url:t.attr("action"),type:"post",data:t.serialize(),success:function(e){$(".js-btn-thread-post-form-save").button("reset"),$("#thread-post-num").text(parseInt($("#thread-post-num").text())+1);var a=$(e).appendTo(".thread-post-list").attr("id");n.setData(""),$(".js-attachment-list").empty(),$(".js-attachment-ids").val(""),$(".js-upload-file").show(),t.find("[type=submit]").removeAttr("disabled"),window.location.href="#"+a},error:function(t){$(".js-btn-thread-post-form-save").button("reset")}})}}),$("[data-role=confirm-btn]").click(function(){var t=$(this);if(!confirm(t.data("confirmMessage")))return!1;$.post(t.data("url"),function(){var e=t.data("afterUrl");e?window.location.href=e:window.location.reload()})}),$(".thread-post-list").on("click",".js-call-username",function(){var t=$(this).parent().data("user");n.focus(),n.insertHtml("@"+t+"&nbsp;")}),$(".thread-post-list").on("click","[data-action=post-delete]",function(){if(!confirm(Translator.trans("course.thread_delete_hint")))return!1;var t=$(this);$.post(t.data("url"),function(){window.location.reload()})})}},["eb8f89cfd4f6572009d6"]);