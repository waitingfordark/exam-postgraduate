webpackJsonp(["app/js/auth/captcha-modal/index"],{0:function(t,e){t.exports=jQuery},"1934f3cb54a74b8f6029":function(t,e,a){"use strict";var n=a("601020d4b7c53037d8f9"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),r="",c="";$('input[name="set_bind_emailOrMobile"]').length>0?(r="set_bind_emailOrMobile",c="sms_registration"):$('input[name="mobile"]').length>0?(r="mobile",c=$("#password-reset-by-mobile-form").length>0?"sms_forget_password":$("#settings-find-pay-password-form").length>0?"sms_forget_pay_password":"sms_bind"):(r=null==$('[name="verifiedMobile"]').val()?"emailOrMobile":"verifiedMobile",c="sms_registration"),$("#captcha-form").find("#getcode_num").attr("src",$("#getcode_num").data("url")+"?"+Math.random());new i.default($("#captcha-form"),r,c,"captcha_num")},"601020d4b7c53037d8f9":function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),r=a("0282bb17fb83bfbfed9b"),c=function(t){return t&&t.__esModule?t:{default:t}}(r),o=function(){function t(e,a,i,r){n(this,t),this.$element=e,this.dataTo=a,this.smsType=i,this.captchaNum=r,this.CaptchaValidator=null,this.init()}return i(t,[{key:"init",value:function(){var t=this;this.$element.on("click","#getcode_num",function(e){return t.changeCaptcha(e)}),$(".js-captcha-btn").click(function(e){return t.submitForm(e)}),this.initValidator()}},{key:"changeCaptcha",value:function(t){var e=$(t.currentTarget);e.attr("src",e.data("url")+"?"+Math.random())}},{key:"submitForm",value:function(){this.CaptchaValidator.form()&&this.$element.submit()}},{key:"initValidator",value:function(){var t=this;this._captchaValidated=!1,this.CaptchaValidator=this.$element.validate({onkeyup:!1,onfocusout:!1,rules:{captcha_num:{required:!0,alphanumeric:!0}},messages:{captcha_num:{required:Translator.trans("auth.mobile_captcha_required_error_hint")}},submitHandler:function(e){$.get(t.$element.attr("action"),{value:$("#captcha_num_modal").val()},function(e){if(e.success){t.$element.parents(".modal").modal("hide"),t._captchaValidated=!0;new c.default({element:".js-sms-send",url:$(".js-sms-send").data("smsUrl"),smsType:t.smsType,dataTo:t.dataTo,captchaNum:t.captchaNum,captcha:!0,captchaValidated:t._captchaValidated,preSmsSend:function(){return!0}});$(".js-sms-send").off("click")}else t._captchaValidated=!1,t.$element.find("#getcode_num").attr("src",$("#getcode_num").data("url")+"?"+Math.random()),t.$element.find(".help-block").html('<span class="color-danger">'+Translator.trans("auth.mobile_captcha_error_hint")+"</span>"),t.$element.find(".help-block").show()},"json")}}),$("#captcha_num_modal").keydown(function(e){13==e.keyCode&&t.CaptchaValidator.form()})}}]),t}();e.default=o}},["1934f3cb54a74b8f6029"]);